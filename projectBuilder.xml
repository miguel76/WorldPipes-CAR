<?xml version="1.0" encoding="UTF-8"?>
<project name="WorldPipes-CAR.makeCAR" default="makeCAR" basedir=".">
  <target name ="makeCAR" description="Create the CAR file">
    <zip destfile="${basedir}/bin/WorldPipes.car">
      <zipfileset dir="." excludes="bin/WorldPipes.car,*.properties,LICENSE,README.md,projectBuilder.xml,bin,bin/**,**/.*,**/.*/**"/>
    </zip>
  </target>
  <target name ="uploadCAR" description="Create the CAR file">
    <property file="${basedir}/callimachus.properties"/>
  	<input
	    message="Please enter callimachus username:"
  	    addproperty="callimachus.user"
 	  />
  	<input
  	    message="Please enter callimachus password:"
  	    addproperty="callimachus.pwd">
    </input>
	<exec executable="curl">
 	  <arg line="--user ${callimachus.user}:${callimachus.pwd}"/>
 	  <arg value="--digest"/>
 	  <arg line="--upload-file ${basedir}/bin/WorldPipes.car"/>
 	  <arg value="http://localhost:4040/SWOWS/?archive"/>
 	</exec>
  </target>
</project>